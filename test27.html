

<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
<script type="text/javascript" src="https://unpkg.com/axios"></script>
<script type="text/javascript" src="https://unpkg.com/lodash"></script>

 
    <div id="app">
      <h1>{{posts.length}} posts</h1>
      <h1>{{totalResults}}</h1>
        <li v-for="(posts, index) in paginatedOrders" :key="index">{{posts.title}}</li>
      </ul>
      <button @click="loadMore" v-if="currentPage * maxPerPage < posts.length">load more</button>
      
    </div>
 
  
  <script>
    const testVue = new Vue({
   
    name: "App",
    el : "#app",
    data() {
      return {
        orders: [
          {
            id: 1,
            item_description: "One",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 2,
            item_description: "Two",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 3,
            item_description: "Three",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Four",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Five",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Six",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Seven",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Eight",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Nine",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Ten",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Eleven",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          },
          {
            id: 4,
            item_description: "Twleve",
            created_at: "23, Dec 2019",
            delivery_address: "Location",
            cost: "2500"
          }
        ],
        
        currentPage: 1,
        maxPerPage: 3,
        showReadMore: true,
        posts : []
      };
    },
    beforeCreate() {
        //this.fetchContacts
        //this.fetchContacts()
    },
    created() {
        this.fetchContacts()
        //console.log(this.orders)
    },
    computed: {
      totalResults() {  // 전체 게시물 수 
        return Object.keys(this.posts).length;
      },
      pageCount() { // 페이지 번호 
        return Math.ceil(this.totalResults / this.maxPerPage);
      },
      pageOffest() { // 현재 펼져진 게시물 수
        return this.maxPerPage * this.currentPage;
      },
      paginatedOrders() { // 표시할 게시물수
        //return this.orders.slice(0, this.currentPage * this.maxPerPage);
        return this.posts.slice(0, this.currentPage * this.maxPerPage);
      }
    },
    methods: {
        loadMore() {
        this.currentPage += 1;
        },
      
        fetchContacts : _.debounce( function () {
                axios.get('https://jsonplaceholder.typicode.com/posts')
                .then( (res) => {
                    console.log(res)
                    this.posts = res.data;
                });
        }, 300),

        /*        
        fetchContacts() {
            axios.get('https://jsonplaceholder.typicode.com/posts').then( (res)=> {
                console.log(res)
                //this.posts =JSON.stringify(res.data);
                this.posts = res.data
            })
        }
        */    

    },
    watch:{
        /*
        pageOffest(){
            if(this.pageOffest > 7){
                alert('70')
            }
        }
            */
    }
  });
  </script>
  
  <style>
  </style>


